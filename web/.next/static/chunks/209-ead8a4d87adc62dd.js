"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{1012:(e,t,r)=>{r.d(t,{G:()=>o,s:()=>l});var a=r(4248),n=r(4564);let s=(0,n.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,n.useState)(!1),[o,i]=(0,n.useState)(null),c=(0,n.useCallback)(e=>{i(e),l(!0)},[]),d=(0,n.useCallback)(()=>{l(!1),i(null)},[]);return(0,a.jsx)(s.Provider,{value:{showConfirm:c,hideConfirm:d,isOpen:r,dialogData:o},children:t})}function o(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useConfirmDialog must be used within a ConfirmDialogProvider");return e}},2829:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(4248),n=r(4564);function s(e){let{value:t,onChange:r,options:s,placeholder:l="Select...",className:o=""}=e,[i,c]=(0,n.useState)(!1),d=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let u=s.find(e=>e.value===t);return(0,a.jsxs)("div",{className:"relative ".concat(o),ref:d,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>c(!i),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-1 focus:ring-slate-400 focus:border-slate-400 transition-colors text-left flex items-center justify-between bg-white hover:bg-slate-50",children:[(0,a.jsx)("span",{className:u?"text-slate-900":"text-slate-500",children:u?u.label:l}),(0,a.jsx)("svg",{className:"w-4 h-4 text-slate-400 transition-transform ".concat(i?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:s.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{r(e.value),c(!1)},className:"w-full px-3 py-2 text-sm text-left hover:bg-slate-100 transition-colors first:rounded-t-lg last:rounded-b-lg ".concat(e.value===t?"bg-slate-100 text-slate-900 font-medium":"text-slate-700"),children:e.label},e.value))})]})}},7143:(e,t,r)=>{r.d(t,{M:()=>f,E:()=>m});var a=r(4248),n=r(4564),s=r(4650);let l=new Map,o=new Map,i={enabled:!0,staleTime:3e5,cacheTime:6e5,retry:!0,retryDelay:1e3,maxRetries:3},c=e=>new Promise(t=>setTimeout(t,e));function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={...i,...r},[s,d]=(0,n.useState)({data:null,loading:!1,error:null,lastFetched:null}),u=(0,n.useRef)(!0),h=(0,n.useRef)(0);(0,n.useEffect)(()=>()=>{u.current=!1},[]);let f=(0,n.useCallback)(async function(){let t,r,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!a.enabled)return null;let s=l.get(e);if(!n&&s&&(t=s.timestamp,r=a.staleTime,!(Date.now()-t>r)))return u.current&&d(e=>({...e,data:s.data,error:null,lastFetched:s.timestamp})),s.data;let i=o.get(e);if(i)try{return await i}catch(e){throw e}"".concat(e,"-").concat(++h.current);let c=m();o.set(e,c);try{let t=await c;return l.set(e,{data:t,timestamp:Date.now()}),u.current&&d({data:t,loading:!1,error:null,lastFetched:Date.now()}),t}catch(e){throw u.current&&d(t=>({...t,loading:!1,error:e instanceof Error?e.message:"Unknown error"})),e}finally{o.delete(e)}},[e,t,a.enabled,a.staleTime]),m=async()=>{let e;for(let r=0;r<=a.maxRetries;r++)try{return u.current&&d(e=>({...e,loading:!0,error:null})),await t()}catch(t){if(e=t instanceof Error?t:Error("Unknown error"),r===a.maxRetries)throw e;await c(a.retryDelay*Math.pow(2,r))}throw e};return(0,n.useEffect)(()=>{a.enabled&&f()},[e,a.enabled]),(0,n.useEffect)(()=>{let e=setInterval(()=>{let e=Date.now();for(let[t,r]of l.entries())e-r.timestamp>a.cacheTime&&l.delete(t)},6e4);return()=>clearInterval(e)},[a.cacheTime]),{...s,refetch:()=>f(!0),invalidate:()=>{l.delete(e),o.delete(e)}}}let u={clear:()=>{l.clear(),o.clear()},clearByPattern:e=>{for(let t of l.keys())t.includes(e)&&(l.delete(t),o.delete(t))}},h=(0,n.createContext)(void 0);function f(e){let{children:t,user:r}=e,l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d("expenses-".concat(JSON.stringify(e||{})),async()=>{let t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,a]=e;null!=a&&""!==a&&t.append(r,String(a))}),t.append("limit","100");let r=await (0,s.Ud)("/api/expenses?".concat(t.toString()));if(!r.ok)throw Error("Failed to fetch expenses: ".concat(r.status));let a=await r.json();if(!a.success)throw Error(a.error||"Failed to fetch expenses");return a.data||[]},{staleTime:12e4,cacheTime:3e5,...t})}({},{enabled:!!r}),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d("budgets-".concat(JSON.stringify(e||{})),async()=>{let t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,a]=e;null!=a&&""!==a&&t.append(r,String(a))});let r=await (0,s.Ud)("/api/budgets?".concat(t.toString()));if(!r.ok)throw Error("Failed to fetch budgets: ".concat(r.status));let a=await r.json();if(!a.success)throw Error(a.error||"Failed to fetch budgets");return a.data||[]},{staleTime:3e5,cacheTime:6e5,...t})}({},{enabled:!!r}),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d("categories",async()=>{let e=await (0,s.Ud)("/api/categories");if(!e.ok)throw Error("Failed to fetch categories: ".concat(e.status));let t=await e.json();if(!t.success)throw Error(t.error||"Failed to fetch categories");return t.data||[]},{staleTime:6e5,cacheTime:18e5,...e})}({enabled:!!r}),c=(0,n.useMemo)(()=>e=>{var t;return(null==(t=l.data)?void 0:t.filter(t=>t.month===e))||[]},[l.data]),f=(0,n.useMemo)(()=>e=>{var t;return(null==(t=o.data)?void 0:t.filter(t=>t.month===e))||[]},[o.data]),m=(0,n.useMemo)(()=>e=>{var t;return null==(t=i.data)?void 0:t.find(t=>t.category_id===e)},[i.data]),x=(0,n.useMemo)(()=>e=>{var t;return null==(t=o.data)?void 0:t.find(t=>t.budget_id===e)},[o.data]),g=e=>{"all"!==e&&e?u.clearByPattern(e):u.clear()},p=async e=>{g("expenses"),await l.refetch()},b=async(e,t)=>{g("expenses"),await l.refetch()},w=async e=>{g("expenses"),await l.refetch()},v=async e=>{g("budgets"),await o.refetch()},j=async(e,t)=>{g("budgets"),await o.refetch()},y=async e=>{g("budgets"),await o.refetch()},k={expenses:l.data||[],budgets:o.data||[],categories:i.data||[],loading:{expenses:l.loading,budgets:o.loading,categories:i.loading},error:{expenses:l.error,budgets:o.error,categories:i.error},refetchExpenses:l.refetch,refetchBudgets:o.refetch,refetchCategories:i.refetch,invalidateCache:g,getExpensesByMonth:c,getBudgetsByMonth:f,getCategoryById:m,getBudgetById:x,addExpense:p,updateExpense:b,deleteExpense:w,addBudget:v,updateBudget:j,deleteBudget:y};return(0,a.jsx)(h.Provider,{value:k,children:t})}function m(){let e=(0,n.useContext)(h);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},7668:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(4248),n=r(4564);function s(e){let{value:t,onChange:r,placeholder:s="Select month",className:l="",disabled:o=!1,required:i=!1}=e,[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(t?new Date(t+"-01"):null),[f,m]=(0,n.useState)((null==u?void 0:u.getFullYear())||new Date().getFullYear()),x=(0,n.useRef)(null),g=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(t){let e=new Date(t+"-01");h(e),m(e.getFullYear())}else h(null)},[t]),(0,n.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&x.current&&!x.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let p=e=>{let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0");return"".concat(t,"-").concat(r)},b=e=>{o||m(t=>"prev"===e?t-1:t+1)},w=e=>{let t=new Date;return f===t.getFullYear()&&e===t.getMonth()},v=e=>u&&u.getFullYear()===f&&u.getMonth()===e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{ref:x,type:"text",value:u&&u?u.toLocaleDateString("en-US",{year:"numeric",month:"short"}):"",onChange:()=>{},onClick:()=>!o&&d(!c),placeholder:s,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-1 focus:ring-slate-400 focus:border-slate-400 ".concat(o?"cursor-not-allowed bg-slate-50 text-slate-400":"cursor-pointer"," ").concat(l),readOnly:!0,disabled:o,required:i}),c&&!o&&(0,a.jsxs)("div",{ref:g,className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg z-50 min-w-48",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-slate-100",children:[(0,a.jsx)("button",{onClick:()=>b("prev"),className:"p-1 hover:bg-slate-100 rounded transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-slate-900",children:f}),(0,a.jsx)("button",{onClick:()=>b("next"),className:"p-1 hover:bg-slate-100 rounded transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-1 p-3",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((e,t)=>(0,a.jsx)("button",{onClick:()=>(e=>{if(o)return;let t=new Date(f,e,1);h(t),r(p(t)),d(!1)})(t),className:"\n                  px-2 py-2 text-sm rounded transition-colors text-center\n                  hover:bg-slate-100\n                  ".concat(w(t)?"bg-slate-100 font-medium":"","\n                  ").concat(v(t)?"bg-slate-900 text-white hover:bg-slate-800":"","\n                  ").concat(v(t)||w(t)?"":"text-slate-700","\n                "),children:e},t))}),(0,a.jsx)("div",{className:"p-2 border-t border-slate-100",children:(0,a.jsx)("button",{onClick:()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1);h(t),m(e.getFullYear()),r(p(t)),d(!1)},className:"w-full text-xs text-slate-600 hover:text-slate-900 py-1",children:"Current Month"})})]})]})}},9497:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(4248);function n(e){let{currentPage:t,totalPages:r,onPageChange:n,totalItems:s,itemsPerPage:l}=e,o=Math.min(t*l,s);return r<=1?null:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-100",children:[(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:["Showing ",(t-1)*l+1," to ",o," of ",s," expenses"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>n(t-1),disabled:1===t,className:"p-2 text-slate-400 hover:text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:(()=>{let e=[],a=[];for(let a=Math.max(2,t-2);a<=Math.min(r-1,t+2);a++)e.push(a);return t-2>2?a.push(1,"..."):a.push(1),a.push(...e),t+2<r-1?a.push("...",r):r>1&&a.push(r),a})().map((e,r)=>"..."===e?(0,a.jsx)("span",{className:"px-2 py-1 text-slate-400",children:"..."},"dots-".concat(r)):(0,a.jsx)("button",{onClick:()=>n(e),className:"px-3 py-1 text-sm rounded transition-colors ".concat(t===e?"bg-slate-900 text-white":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),children:e},e))}),(0,a.jsx)("button",{onClick:()=>n(t+1),disabled:t===r,className:"p-2 text-slate-400 hover:text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})}}}]);