"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{2763:(e,t,s)=>{s.d(t,{A:()=>l});var r=s(2381),a=s(665);function l(e){let{value:t,onChange:s,placeholder:l="Select month",className:n="",disabled:o=!1,required:i=!1}=e,[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(t?new Date(t+"-01"):null),[x,f]=(0,a.useState)((null==u?void 0:u.getFullYear())||new Date().getFullYear()),m=(0,a.useRef)(null),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(t){let e=new Date(t+"-01");h(e),f(e.getFullYear())}else h(null)},[t]),(0,a.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&m.current&&!m.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let g=e=>{let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0");return"".concat(t,"-").concat(s)},b=e=>{o||f(t=>"prev"===e?t-1:t+1)},v=e=>{let t=new Date;return x===t.getFullYear()&&e===t.getMonth()},w=e=>u&&u.getFullYear()===x&&u.getMonth()===e;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{ref:m,type:"text",value:u&&u?u.toLocaleDateString("en-US",{year:"numeric",month:"short"}):"",onChange:()=>{},onClick:()=>!o&&d(!c),placeholder:l,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-1 focus:ring-slate-400 focus:border-slate-400 ".concat(o?"cursor-not-allowed bg-slate-50 text-slate-400":"cursor-pointer"," ").concat(n),readOnly:!0,disabled:o,required:i}),c&&!o&&(0,r.jsxs)("div",{ref:p,className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg z-50 min-w-48",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-slate-100",children:[(0,r.jsx)("button",{onClick:()=>b("prev"),className:"p-1 hover:bg-slate-100 rounded transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("h3",{className:"text-sm font-medium text-slate-900",children:x}),(0,r.jsx)("button",{onClick:()=>b("next"),className:"p-1 hover:bg-slate-100 rounded transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-1 p-3",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((e,t)=>(0,r.jsx)("button",{onClick:()=>(e=>{if(o)return;let t=new Date(x,e,1);h(t),s(g(t)),d(!1)})(t),className:"\n                  px-2 py-2 text-sm rounded transition-colors text-center\n                  hover:bg-slate-100\n                  ".concat(v(t)?"bg-slate-100 font-medium":"","\n                  ").concat(w(t)?"bg-slate-900 text-white hover:bg-slate-800":"","\n                  ").concat(w(t)||v(t)?"":"text-slate-700","\n                "),children:e},t))}),(0,r.jsx)("div",{className:"p-2 border-t border-slate-100",children:(0,r.jsx)("button",{onClick:()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1);h(t),f(e.getFullYear()),s(g(t)),d(!1)},className:"w-full text-xs text-slate-600 hover:text-slate-900 py-1",children:"Current Month"})})]})]})}},2910:(e,t,s)=>{s.d(t,{A:()=>i});var r=s(665);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:s,strokeWidth:i?24*Number(o)/Number(a):o,className:l("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{className:i,...c}=s;return(0,r.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return s.displayName=a(e),s}},3176:(e,t,s)=>{s.d(t,{G:()=>o,s:()=>n});var r=s(2381),a=s(665);let l=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(null),c=(0,a.useCallback)(e=>{i(e),n(!0)},[]),d=(0,a.useCallback)(()=>{n(!1),i(null)},[]);return(0,r.jsx)(l.Provider,{value:{showConfirm:c,hideConfirm:d,isOpen:s,dialogData:o},children:t})}function o(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useConfirmDialog must be used within a ConfirmDialogProvider");return e}},3977:(e,t,s)=>{s.d(t,{A:()=>l});var r=s(2381),a=s(665);function l(e){let{value:t,onChange:s,options:l,placeholder:n="Select...",className:o=""}=e,[i,c]=(0,a.useState)(!1),d=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let u=l.find(e=>e.value===t);return(0,r.jsxs)("div",{className:"relative ".concat(o),ref:d,children:[(0,r.jsxs)("button",{type:"button",onClick:()=>c(!i),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-1 focus:ring-slate-400 focus:border-slate-400 transition-colors text-left flex items-center justify-between bg-white hover:bg-slate-50",children:[(0,r.jsx)("span",{className:u?"text-slate-900":"text-slate-500",children:u?u.label:n}),(0,r.jsx)("svg",{className:"w-4 h-4 text-slate-400 transition-transform ".concat(i?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,r.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:l.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{s(e.value),c(!1)},className:"w-full px-3 py-2 text-sm text-left hover:bg-slate-100 transition-colors first:rounded-t-lg last:rounded-b-lg ".concat(e.value===t?"bg-slate-100 text-slate-900 font-medium":"text-slate-700"),children:e.label},e.value))})]})}},5684:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(2910).A)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]])},9633:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(2910).A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},9869:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(2381);function a(e){let{currentPage:t,totalPages:s,onPageChange:a,totalItems:l,itemsPerPage:n}=e,o=Math.min(t*n,l);return s<=1?null:(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-100",children:[(0,r.jsxs)("div",{className:"text-sm text-slate-500",children:["Showing ",(t-1)*n+1," to ",o," of ",l," expenses"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("button",{onClick:()=>a(t-1),disabled:1===t,className:"p-2 text-slate-400 hover:text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("div",{className:"flex items-center space-x-1",children:(()=>{let e=[],r=[];for(let r=Math.max(2,t-2);r<=Math.min(s-1,t+2);r++)e.push(r);return t-2>2?r.push(1,"..."):r.push(1),r.push(...e),t+2<s-1?r.push("...",s):s>1&&r.push(s),r})().map((e,s)=>"..."===e?(0,r.jsx)("span",{className:"px-2 py-1 text-slate-400",children:"..."},"dots-".concat(s)):(0,r.jsx)("button",{onClick:()=>a(e),className:"px-3 py-1 text-sm rounded transition-colors ".concat(t===e?"bg-slate-900 text-white":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"),children:e},e))}),(0,r.jsx)("button",{onClick:()=>a(t+1),disabled:t===s,className:"p-2 text-slate-400 hover:text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})}},9910:(e,t,s)=>{s.d(t,{E:()=>i,M:()=>o});var r=s(2381),a=s(665),l=s(4262);let n=(0,a.createContext)(void 0);function o(e){let{children:t,user:s}=e,[o,i]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[x,f]=(0,a.useState)({expenses:!1,budgets:!1,categories:!1}),[m,p]=(0,a.useState)({expenses:null,budgets:null,categories:null}),g=async()=>{if(s){f(e=>({...e,expenses:!0}));try{let e=await (0,l.Ud)("/api/expenses");if(e.ok){let t=await e.json();i(t.data||[]),p(e=>({...e,expenses:null}))}else p(e=>({...e,expenses:"Failed to fetch expenses"}))}catch(e){p(e=>({...e,expenses:"Failed to fetch expenses"}))}finally{f(e=>({...e,expenses:!1}))}}},b=async()=>{if(s){f(e=>({...e,budgets:!0}));try{let e=await (0,l.Ud)("/api/budgets");if(e.ok){let t=await e.json();d(t.data||[]),p(e=>({...e,budgets:null}))}else p(e=>({...e,budgets:"Failed to fetch budgets"}))}catch(e){p(e=>({...e,budgets:"Failed to fetch budgets"}))}finally{f(e=>({...e,budgets:!1}))}}},v=async()=>{if(s){f(e=>({...e,categories:!0}));try{let e=await (0,l.Ud)("/api/categories");if(e.ok){let t=await e.json();h(t.data||[]),p(e=>({...e,categories:null}))}else p(e=>({...e,categories:"Failed to fetch categories"}))}catch(e){p(e=>({...e,categories:"Failed to fetch categories"}))}finally{f(e=>({...e,categories:!1}))}}};(0,a.useEffect)(()=>{s?(g(),b(),v()):(i([]),d([]),h([]))},[s]);let w=(0,a.useMemo)(()=>e=>o.filter(t=>t.month===e),[o]),k=(0,a.useMemo)(()=>e=>c.filter(t=>t.month===e),[c]),j=(0,a.useMemo)(()=>e=>u.find(t=>t.category_id===e),[u]),y=(0,a.useMemo)(()=>e=>c.find(t=>t.budget_id===e),[c]),N=async e=>{await g()},C=async(e,t)=>{await g()},M=async e=>{await g()},L=async e=>{await b()},S=async(e,t)=>{await b()},E=async e=>{await b()};return(0,r.jsx)(n.Provider,{value:{expenses:o,budgets:c,categories:u,loading:x,error:m,refetchExpenses:g,refetchBudgets:b,refetchCategories:v,invalidateCache:e=>{"all"!==e&&e&&"expenses"!==e||g(),"all"!==e&&e&&"budgets"!==e||b(),"all"!==e&&e&&"categories"!==e||v()},getExpensesByMonth:w,getBudgetsByMonth:k,getCategoryById:j,getBudgetById:y,addExpense:N,updateExpense:C,deleteExpense:M,addBudget:L,updateBudget:S,deleteBudget:E},children:t})}function i(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}}}]);