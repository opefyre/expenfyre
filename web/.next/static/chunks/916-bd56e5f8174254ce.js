"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{1302:(e,t,s)=>{s.d(t,{A:()=>l});var n=s(4248),r=s(4564);function a(e){let{sidebarOpen:t,setSidebarOpen:s,sidebarCollapsed:r,setSidebarCollapsed:a,currentPage:o}=e,l=[{name:"Dashboard",href:"/",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{name:"Expenses",href:"/expenses",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})},{name:"Budgets",href:"/budgets",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{name:"Analytics",href:"/analytics",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}];return(0,n.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 bg-white border-r border-slate-200 flex flex-col transform transition-all duration-300 ease-in-out ".concat(t?"translate-x-0":"-translate-x-full"," ").concat(r?"lg:-translate-x-full":"lg:translate-x-0 w-64"),children:[(0,n.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsxs)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 via-blue-600 to-purple-600 flex items-center justify-center shadow-lg relative overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"}),(0,n.jsx)("svg",{className:"w-6 h-6 text-white relative z-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-xl font-bold gradient-text",children:"Expenfyre"}),(0,n.jsx)("p",{className:"text-xs text-slate-500",children:"Expense Tracker"})]})]})}),(0,n.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:l.map(e=>{let t=o===e.href;return(0,n.jsxs)("a",{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ".concat(t?"bg-blue-50 text-blue-700 border border-blue-200":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[e.icon,(0,n.jsx)("span",{className:t?"font-medium":"",children:e.name})]},e.name)})})]})}function o(e){let{user:t,onSignOut:s,onToggleSidebar:a,onToggleCollapse:o}=e,[l,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=e=>{l&&(e.target.closest("[data-dropdown]")||i(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]),(0,n.jsx)("header",{className:"bg-white border-b border-slate-200 px-6 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("button",{onClick:a,className:"p-2 rounded-lg text-slate-600 hover:bg-slate-100 transition-colors lg:hidden",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,n.jsx)("button",{onClick:o,className:"hidden lg:flex p-2 rounded-lg text-slate-600 hover:bg-slate-100 transition-colors",children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),(0,n.jsxs)("div",{className:"relative","data-dropdown":!0,children:[(0,n.jsxs)("button",{onClick:()=>i(!l),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-slate-50 transition-colors",children:[(null==t?void 0:t.picture)&&(0,n.jsx)("img",{src:t.picture,alt:t.name,className:"w-8 h-8 rounded-lg"}),(0,n.jsx)("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,n.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-slate-200 py-2 z-50",children:[(0,n.jsxs)("div",{className:"px-4 py-3 border-b border-slate-100",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-slate-900",children:null==t?void 0:t.name}),(0,n.jsx)("p",{className:"text-xs text-slate-500",children:null==t?void 0:t.email})]}),(0,n.jsx)("div",{className:"py-1",children:(0,n.jsxs)("button",{onClick:s,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors flex items-center space-x-2",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,n.jsx)("span",{children:"Sign Out"})]})})]})]})]})})}function l(e){let{children:t,user:s,currentPage:l,onSignOut:i}=e,[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"h-screen bg-slate-50 overflow-hidden w-full max-w-full",children:[c&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>d(!1)}),(0,n.jsxs)("div",{className:"flex h-full w-full max-w-full",children:[(0,n.jsx)(a,{sidebarOpen:c,setSidebarOpen:d,sidebarCollapsed:u,setSidebarCollapsed:h,currentPage:l}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col transition-all duration-300 ease-in-out min-w-0 ".concat(u?"lg:ml-0":"lg:ml-64"),children:[(0,n.jsx)(o,{user:s,onSignOut:i,onToggleSidebar:()=>d(!c),onToggleCollapse:()=>h(!u)}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden w-full",children:(0,n.jsx)("div",{className:"p-3 sm:p-6 h-full w-full max-w-full",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto w-full h-full min-w-0",children:t})})}),(0,n.jsx)("footer",{className:"bg-white border-t border-slate-200 px-3 sm:px-6 py-4 flex-shrink-0 w-full",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between text-sm text-slate-500 space-y-2 sm:space-y-0 max-w-7xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,n.jsx)("span",{children:"\xa9 2025 Expenfyre"}),(0,n.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,n.jsx)("span",{children:"Expense Tracker"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 text-xs sm:text-sm",children:[(0,n.jsx)("span",{children:"Version 1.0.0"}),(0,n.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,n.jsx)("span",{className:"hidden sm:inline",children:"Built with Next.js & Cloudflare"})]})]})})]})]})]})}},1795:(e,t,s)=>{s.d(t,{Ax:()=>i,dj:()=>l,tE:()=>o});var n=s(4248),r=s(4564);let a=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,r.useState)([]),l=(0,r.useCallback)(e=>{let t=Math.random().toString(36).substr(2,9),s=3e3;"error"===e.type?s=5e3:"success"===e.type?s=2500:"warning"===e.type&&(s=4e3);let n={id:t,duration:void 0!==e.duration?e.duration:s,...e};console.log("Adding toast:",{type:e.type,duration:n.duration,title:e.title}),o(e=>[...e,n])},[]),i=(0,r.useCallback)(e=>{o(t=>t.filter(t=>t.id!==e))},[]),c=(0,r.useCallback)(()=>{o([])},[]);return(0,n.jsx)(a.Provider,{value:{toasts:s,addToast:l,removeToast:i,clearToasts:c},children:t})}function l(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}function i(){let{addToast:e}=l(),t=(0,r.useCallback)((t,s,n)=>{e({type:"success",title:t,message:s,duration:n})},[e]),s=(0,r.useCallback)((t,s,n)=>{e({type:"error",title:t,message:s,duration:n})},[e]);return{showSuccess:t,showError:s,showWarning:(0,r.useCallback)((t,s,n)=>{e({type:"warning",title:t,message:s,duration:n})},[e]),showInfo:(0,r.useCallback)((t,s,n)=>{e({type:"info",title:t,message:s,duration:n})},[e])}}},2536:(e,t,s)=>{s.d(t,{M:()=>l,o:()=>o});var n=s(4248),r=s(4564);let a=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,r.useState)(!1),[l,i]=(0,r.useState)("Loading..."),c=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Loading...";o(e),i(t)},[]),d=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";c(!0,e)},[c]),u=(0,r.useCallback)(()=>{c(!1)},[c]);return(0,n.jsx)(a.Provider,{value:{isLoading:s,loadingMessage:l,setLoading:c,showLoading:d,hideLoading:u},children:t})}function l(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useLoading must be used within a LoadingProvider");return e}},4650:(e,t,s)=>{s.d(t,{G6:()=>r,HW:()=>a,Ud:()=>o});let n="https://expense-tracker-api.opefyre.workers.dev";function r(){let e=window.open("".concat(n,"/api/auth/google"),"google-auth","width=500,height=600,scrollbars=yes,resizable=yes");if(!e)throw Error("Popup blocked by browser");return e}async function a(){let e=l("access_token"),t={"Content-Type":"application/json"};e&&(t.Authorization="Bearer ".concat(e));try{let e=await fetch("".concat(n,"/api/auth/me"),{method:"GET",headers:t,credentials:"include"});if(!e.ok){if(401===e.status)return console.log("getCurrentUser: 401 Unauthorized - no valid token"),null;let t=await e.text();return console.error("Auth check failed:",e.status,t),null}let s=await e.json();if(s.success&&s.user)return s.user;return console.error("Invalid user data received:",s),null}catch(e){return console.error("getCurrentUser error:",e),null}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=l("access_token"),r=l("refresh_token"),a={...t.headers};a["Content-Type"]||t.body instanceof FormData||(a["Content-Type"]="application/json"),s&&(a.Authorization="Bearer ".concat(s));let o=await fetch("".concat(n).concat(e),{...t,headers:a,credentials:"include"});if(401===o.status&&r&&"/api/auth/refresh"!==e){console.log("Access token expired, attempting refresh...");try{let s=await fetch("".concat(n,"/api/auth/refresh"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},credentials:"include"});if(s.ok){let r=await s.json();console.log("Token refresh successful"),document.cookie="access_token=".concat(r.access_token,"; Secure; SameSite=None; Path=/; Max-Age=900"),document.cookie="refresh_token=".concat(r.refresh_token,"; Secure; SameSite=None; Path=/; Max-Age=604800"),a.Authorization="Bearer ".concat(r.access_token),o=await fetch("".concat(n).concat(e),{...t,headers:a,credentials:"include"}),console.log("Retry request successful:",o.status)}else console.error("Token refresh failed:",s.status),document.cookie="access_token=; Secure; SameSite=None; Path=/; Max-Age=0",document.cookie="refresh_token=; Secure; SameSite=None; Path=/; Max-Age=0",window.location.href="/"}catch(e){console.error("Token refresh failed:",e),document.cookie="access_token=; Secure; SameSite=None; Path=/; Max-Age=0",document.cookie="refresh_token=; Secure; SameSite=None; Path=/; Max-Age=0",window.location.href="/"}}return o}function l(e){let t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length){var s;return(null==(s=t.pop())?void 0:s.split(";").shift())||null}return null}}}]);